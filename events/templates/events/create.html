{% extends 'base.html' %}
{% load static %}

{% block title %}Create Event - Artinerary{% endblock %}

{% block extra_head %}
<style>
    .form-container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 2rem;
    }
    .form-group {
        margin-bottom: 1.5rem;
    }
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
    }
    .form-group input[type="text"],
    .form-group input[type="datetime-local"],
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .location-search-container,
    .user-search-container {
        margin-top: 0.5rem;
    }
    .autocomplete-results {
        border: 1px solid #ddd;
        max-height: 200px;
        overflow-y: auto;
        background: white;
        display: none;
    }
    .autocomplete-item {
        padding: 0.5rem;
        cursor: pointer;
    }
    .autocomplete-item:hover {
        background: #f0f0f0;
    }
    .chips-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }
    .chip {
        background: #007bff;
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 16px;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }
    .chip-remove {
        cursor: pointer;
        font-weight: bold;
    }
    .add-button {
        margin-top: 0.5rem;
        padding: 0.5rem 1rem;
        background: #28a745;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .add-button:disabled {
        background: #ccc;
        cursor: not-allowed;
    }
    .counter {
        color: #666;
        font-size: 0.9rem;
        margin-top: 0.25rem;
    }
    .submit-button {
        padding: 0.75rem 2rem;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 1.1rem;
        cursor: pointer;
    }
    .submit-button:hover {
        background: #0056b3;
    }
</style>
{% endblock %}

{% block content %}
<div class="form-container">
    <h1>Create Event</h1>
    
    <form method="post" id="create-event-form">
        {% csrf_token %}
        
        <!-- Title -->
        <div class="form-group">
            <label for="{{ form.title.id_for_label }}">Event Title *</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="error">{{ form.title.errors }}</div>
            {% endif %}
        </div>
        
        <!-- Date & Time -->
        <div class="form-group">
            <label for="{{ form.start_time.id_for_label }}">Date & Time *</label>
            {{ form.start_time }}
            {% if form.start_time.errors %}
                <div class="error">{{ form.start_time.errors }}</div>
            {% endif %}
        </div>
        
        <!-- Starting Location -->
        <div class="form-group">
            <label for="{{ form.start_location.id_for_label }}">Starting Location *</label>
            {{ form.start_location }}
            {% if form.start_location.errors %}
                <div class="error">{{ form.start_location.errors }}</div>
            {% endif %}
            
            <div class="location-search-container">
                <input type="text" id="location-search" placeholder="Search for an art location...">
                <div id="location-results" class="autocomplete-results"></div>
            </div>
        </div>
        
        <!-- Description -->
        <div class="form-group">
            <label for="{{ form.description.id_for_label }}">Description</label>
            {{ form.description }}
            {% if form.description.errors %}
                <div class="error">{{ form.description.errors }}</div>
            {% endif %}
        </div>
        
        <!-- Additional Locations -->
        <div class="form-group">
            <label>Additional Locations (optional)</label>
            <div id="locations-chips" class="chips-container"></div>
            <div class="counter" id="locations-counter">0/5</div>
            <div class="location-search-container">
                <input type="text" id="extra-location-search" placeholder="Search for locations to add...">
                <div id="extra-location-results" class="autocomplete-results"></div>
            </div>
        </div>
        
        <!-- Invite Members -->
        <div class="form-group">
            <label>Invite Members</label>
            <div id="invites-chips" class="chips-container"></div>
            <div class="user-search-container">
                <input type="text" id="user-search" placeholder="Search for users to invite...">
                <div id="user-results" class="autocomplete-results"></div>
            </div>
        </div>
        
        <!-- Visibility -->
        <div class="form-group">
            <label for="{{ form.visibility.id_for_label }}">Visibility *</label>
            {{ form.visibility }}
            {% if form.visibility.errors %}
                <div class="error">{{ form.visibility.errors }}</div>
            {% endif %}
        </div>
        
        <button type="submit" class="submit-button">Create Event</button>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'events/create.js' %}"></script>
{% endblock %}

